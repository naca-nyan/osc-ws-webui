import{d as $,r as m,o,c as l,a as s,w,v as S,F as p,b as h,t as b,e as O,f as E,g as L,h as D,i as N,u as A,n as x,j as F}from"./vendor.cd8251b2.js";const I=function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))_(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const t of n.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&_(t)}).observe(document,{childList:!0,subtree:!0});function u(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function _(e){if(e.ep)return;e.ep=!0;const n=u(e);fetch(e.href,n)}};I();const P={class:"row"},V={class:"col-sm-8 m-auto mt-2"},M=s("label",{class:"visually-hidden"},"Server Address",-1),T={class:"input-group"},B=["disabled"],G=["disabled"],R={key:1,class:"btn btn-info",disabled:""},U={key:2,class:"btn btn-danger",disabled:""},J={key:0,class:"mt-3"},j={class:"alert alert-danger alert-dismissable fade show p-1 m-auto"},q=$({emits:["onmessage","onclose"],setup(y,{expose:f,emit:u}){const _=m(""),e=m(""),n="wss://osc-ws.herokuapp.com";let t=null;const r=m("CLOSED");function g(){r.value="CONNECTING";try{if(!_.value)throw new Error("\u304A\u306A\u307E\u3048\u304C\u306A\u3044\u3088\uFF5E");if(!e.value)throw new Error("\u3042\u3044\u3053\u3068\u3070\u304C\u306A\u3044\u3088\uFF5E");const i=new URL(n),c=new URLSearchParams({user:_.value,room:e.value});i.search=c.toString(),t=new WebSocket(i),t.onopen=a=>{r.value="OPEN"},t.onmessage=a=>u("onmessage",a),t.onerror=a=>{r.value="CLOSED",d("Connection failed: "+JSON.stringify(a))}}catch(i){r.value="CLOSED",d(i.toString())}}function C(i){r.value==="OPEN"&&t!=null&&t.send(JSON.stringify(i))}function k(){t!=null&&(r.value="CLOSING",t.onclose=()=>{r.value="CLOSED",u("onclose"),t=null},t.close())}const v=m([]);function d(i){v.value.push(i),setTimeout(()=>{v.value.length=0},3e3)}return f({state:r,send:C}),(i,c)=>(o(),l(p,null,[s("div",P,[s("div",V,[M,s("div",T,[w(s("input",{"onUpdate:modelValue":c[0]||(c[0]=a=>_.value=a),class:"form-control",disabled:r.value!=="CLOSED",placeholder:"\u304A\u306A\u307E\u3048"},null,8,B),[[S,_.value]]),w(s("input",{"onUpdate:modelValue":c[1]||(c[1]=a=>e.value=a),class:"form-control",disabled:r.value!=="CLOSED",placeholder:"\u3042\u3044\u3053\u3068\u3070"},null,8,G),[[S,e.value]]),r.value==="CLOSED"?(o(),l("button",{key:0,onClick:c[2]||(c[2]=a=>g()),class:"btn btn-info"}," Connect ")):r.value==="CONNECTING"?(o(),l("button",R," Conecting... ")):r.value==="CLOSING"?(o(),l("button",U," Disconnecting... ")):(o(),l("button",{key:3,onClick:c[3]||(c[3]=a=>k()),class:"btn btn-danger"}," Disconnect "))])])]),v.value.length?(o(),l("div",J,[s("div",j,[(o(!0),l(p,null,h(v.value,a=>(o(),l("div",null,b(a),1))),256))])])):O("",!0)],64))}}),z={class:"mb-3"},K={class:"row mb-1"},W={class:"col form-label"},H={class:"badge rounded-pill bg-secondary text-light"},Q={class:"row"},X={key:0,class:"btn-group"},Y=["onClick"],Z={key:1,class:"btn-group"},ee=["onClick"],te=["onClick"],ne={key:2,class:"btn-group"},se=["onClick"],oe=s("hr",null,null,-1),le=$({props:{parameters:null},emits:["onsend"],setup(y,{emit:f}){function u(_,e){f("onsend",_,e)}return(_,e)=>(o(!0),l(p,null,h(y.parameters,n=>(o(),l("div",z,[s("div",K,[s("div",W,[E(b(n.name)+" ",1),s("span",H,b(n.type),1)])]),s("div",Q,[n.type==="Int"?(o(),l("div",X,[(o(),l(p,null,h(["0","1","2","3","4","5","6"],t=>s("button",{onClick:r=>u(n,t),class:"btn btn-outline-primary"},b(t),9,Y)),64))])):n.type==="Bool"?(o(),l("div",Z,[s("button",{onClick:t=>u(n,"true"),class:"btn btn-outline-primary"}," True ",8,ee),s("button",{onClick:t=>u(n,"false"),class:"btn btn-outline-primary"}," False ",8,te)])):n.type==="Float"?(o(),l("div",ne,[(o(!0),l(p,null,h(["0.0","0.1","0.2","0.3","0.4","0.5","0.6","0.7","0.8","0.9","1.0"],t=>(o(),l("button",{onClick:r=>u(n,t),class:"btn btn-outline-primary"},b(t),9,se))),256))])):O("",!0)]),oe]))),256))}});const ae={class:"container-fluid p-3 mb-3 bg-primary text-white text-center"},re=s("h1",null,"Parameter Sync for VRChat",-1),ce={class:"container"},ue={class:"row"},ie={class:"col"},de={class:"nav nav-tabs mb-3"},_e={class:"nav-item"},ve=["onClick"],fe=s("i",{class:"bi bi-circle-fill text-success pe-1"},null,-1),me={key:0},pe=$({setup(y){const f=["Sync Settings"],u=m(f[0]),_=m(),e=m([]),t=L(new Map),r=D(()=>{var d;if(typeof u.value!="number")return[];const v=u.value;return(d=t.get(v))!=null?d:[]});async function g(v){const d=JSON.parse(v.data);switch(console.log(d),d.event){case"updateRoom":d.roomInfo&&(e.value=d.roomInfo);break;case"closed":e.value=e.value.filter(a=>a.id!==d.id);break;case"message":const{id:i,body:c}=d;switch(c.on){case"sync":const{params:a}=c;t.set(i,a);break}break}}function C(){e.value.length=0,u.value=f[0]}async function k(v,d){const{address:i,type:c}=v,a={on:"send",param:{addr:i,typ:c,value:d}};_.value.state==="OPEN"&&_.value.send(a)}return(v,d)=>(o(),l(p,null,[s("header",ae,[re,N(q,{onOnmessage:g,onOnclose:C,ref_key:"ws",ref:_},null,512)]),s("main",ce,[s("div",ue,[s("div",ie,[s("ul",de,[(o(!0),l(p,null,h(e.value,({id:i,user:c})=>(o(),l("li",_e,[s("a",{onClick:a=>u.value=i,class:x(u.value===i?"nav-link active":"nav-link")},[fe,s("span",null,b(c),1)],10,ve)]))),256))]),typeof u.value=="number"?(o(),l("div",me,[N(le,{parameters:A(r),onOnsend:k},null,8,["parameters"])])):O("",!0)])])])],64))}});F(pe).mount("#app");
